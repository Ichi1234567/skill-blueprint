---
name: blueprint-abandon
description: 廢棄當前進行中的藍圖，移到 abandoned 目錄。當決定不再繼續某個藍圖時使用。
---

# Blueprint Abandon - 廢棄藍圖

將當前進行中的藍圖標記為廢棄，移到 `abandoned/` 目錄。

## 核心功能

- 廢棄當前活躍的藍圖
- 記錄廢棄時間和原因
- 移動到 abandoned 目錄
- 保留所有資訊供日後參考

## 執行步驟

**重要**：所有檔案操作必須在鎖定下執行（見 `guides/COMMON_PATTERNS.md#鎖定機制`）

1. **檢查當前藍圖**

   - 檢查 `.blueprint/current.md` 是否存在
   - 如果不存在：
     ```
     ❌ 沒有進行中的藍圖可以廢棄

     目前沒有活躍的藍圖。
     ```

2. **確認廢棄意圖**

   - 讀取藍圖資訊（功能名稱、類型、狀態）
   - 詢問：
     ```
     確定要廢棄這個藍圖嗎？

     藍圖：[功能名稱]
     類型：[類型]
     狀態：[當前狀態]

     ⚠️ 廢棄後藍圖會移到 abandoned/ 目錄，不會再繼續執行。
     ```
   - 如果使用者已經明確說「廢棄藍圖」，可以跳過確認

3. **讀取廢棄原因**

   - 如果使用者在訊息中已經說明原因（例如：「這個功能不做了，發現有更好的方案」），直接使用
   - 如果沒有提到，詢問：「為什麼要廢棄？（一句話即可，可跳過）」
   - 如果使用者跳過，原因留空（但保留欄位）

4. **讀取藍圖資訊**

   - 從藍圖檔案讀取：功能名稱、建立時間、類型
   - 當前日期作為廢棄日期

5. **更新藍圖狀態**

   - 使用 Edit 工具更新藍圖：
     - 將「狀態」改為 "Abandoned"
     - 在「狀態」後面加上：
       ```markdown
       **廢棄時間**: 2025-12-24
       **廢棄原因**: [使用者提供的原因或留空]
       ```
   - 有原因的格式：
     ```markdown
     **狀態**: Abandoned
     **廢棄時間**: 2025-12-24
     **廢棄原因**: 發現有更好的解決方案
     ```
   - 沒有原因的格式（保留空欄位）：
     ```markdown
     **狀態**: Abandoned
     **廢棄時間**: 2025-12-24
     **廢棄原因**:
     ```

6. **生成廢棄檔名並執行**

   - 生成檔名：`{廢棄日期}-{類型}-{slug}.md`（slug 規則見 `guides/COMMON_PATTERNS.md#slug生成`）
   - 在鎖定下移動檔案到 `.blueprint/abandoned/`（錯誤處理見 `guides/COMMON_PATTERNS.md#bash錯誤處理`）
   - 回報：
     ```
     ✓ 藍圖已廢棄

     檔案：.blueprint/abandoned/{檔名}
     類型：{類型}
     功能：{功能名稱}
     廢棄原因：{原因}

     已移除進行中的藍圖，可以開始新的藍圖了。
     ```

## 廢棄後的藍圖格式

```markdown
# Blueprint: OAuth 整合

**建立時間**: 2025-12-15
**類型**: feat
**狀態**: Abandoned
**廢棄時間**: 2025-12-24
**廢棄原因**: 發現有更好的解決方案

**關聯資訊**:
- Git Branch: feature/oauth
- Beads Issues: beads-145

## 功能描述
...

## 階段規劃
[原本的規劃保持不變，包含已完成的階段進度]
```

## 注意事項

- 廢棄會將狀態改為 "Abandoned"
- 廢棄原因是必填的，方便日後回顧
- 所有階段進度和關聯資訊都會保留
- 檔名中的日期是「廢棄日期」而非「建立日期」
- 廢棄的藍圖存放在 `abandoned/` 目錄，與完成的（`archive/`）和暫停的（`suspended/`）分開
- 廢棄是不可逆的操作（雖然檔案還在，但不建議恢復廢棄的藍圖）
